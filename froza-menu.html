<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Froza Italia - Menu cyfrowe</title>
    <link rel="stylesheet" href="froza-menu-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap">
</head>
<body>
    <header class="site-header">
        <div class="logo">
            <a href="index.html">Froza Italia</a>
        </div>
        <nav class="main-nav">
            <ul>
                <li><a href="#" class="active">Menu cyfrowe</a></li>
            </ul>
        </nav>
    </header>

    <div class="hero-banner">
        <img src="IMG22.JPG" alt="Froza Italia Storefront" class="hero-image">
        <div class="hero-content">
            <h1>Menu cyfrowe Froza Italia</h1>
            <p>Ciesz się naszymi potrawami i napojami</p>
        </div>
    </div>

    <div class="menu-categories">
        <button class="category-btn active" data-target="makarony">Makarony</button>
        <button class="category-btn" data-target="salatki">Sałatki</button>
        <button class="category-btn" data-target="gnocchi">Gnocchi</button>
        <button class="category-btn" data-target="zupy">Zupy</button>
        <button class="category-btn" data-target="pizza">Pizza</button>
        <button class="category-btn" data-target="napoje">Napoje</button>
        <button class="category-btn" data-target="alkohol">Alkohol</button>
    </div>
    
    <script>
        // Анимация появления кнопок категорий при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            const categoryBtns = document.querySelectorAll('.category-btn');
            const menuCategories = document.querySelector('.menu-categories');
            
            // Анимация появления кнопок
            categoryBtns.forEach((btn, index) => {
                btn.style.opacity = '0';
                btn.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    btn.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    btn.style.opacity = '1';
                    btn.style.transform = 'translateY(0)';
                }, 100 + (index * 100)); // Задержка для каждой кнопки
            });
            
            // Центрирование активной кнопки на мобильных устройствах
            function updateEdgeFades() {
                if (window.innerWidth > 768) return; // только для мобильных
                const scrolledLeft = menuCategories.scrollLeft;
                const maxScrollLeft = menuCategories.scrollWidth - menuCategories.clientWidth;
                if (scrolledLeft > 10) {
                    menuCategories.classList.add('show-left');
                } else {
                    menuCategories.classList.remove('show-left');
                }
                if (scrolledLeft >= maxScrollLeft - 10) {
                    menuCategories.classList.add('hide-right');
                } else {
                    menuCategories.classList.remove('hide-right');
                }
            }
            menuCategories.addEventListener('scroll', updateEdgeFades);
            window.addEventListener('resize', updateEdgeFades);
            updateEdgeFades();
            function centerActiveButton() {
                const activeBtn = document.querySelector('.category-btn.active');
                if (activeBtn && window.innerWidth <= 768) {
                    const containerWidth = menuCategories.offsetWidth;
                    const btnLeft = activeBtn.offsetLeft;
                    const btnWidth = activeBtn.offsetWidth;
                    const scrollLeft = btnLeft - (containerWidth / 2) + (btnWidth / 2);
                    
                    menuCategories.scrollTo({
                        left: scrollLeft,
                        behavior: 'smooth'
                    });
                }
            }
            
            // Центрировать при клике на кнопку
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    setTimeout(centerActiveButton, 100);
                });
            });
            
            // Центрировать при загрузке страницы
            setTimeout(centerActiveButton, 500);
            
            // Центрировать при изменении размера окна
            window.addEventListener('resize', centerActiveButton);
        });
    </script>
    
    <div class="mobile-menu-toggle">
        <select id="mobile-category-select" class="mobile-category-select">
            <option value="makarony">Makarony</option>
            <option value="salatki">Sałatki</option>
            <option value="gnocchi">Gnocchi</option>
            <option value="zupy">Zupy</option>
            <option value="pizza">Pizza</option>
            <option value="napoje">Napoje</option>
            <option value="alkohol">Alkohol</option>
        </select>
    </div>
    
    <!-- Нижний бар удален по запросу пользователя -->

    <section class="menu-section" id="makarony">
        <h2 class="section-title">MAKARONY</h2>
        
        <div class="menu-items">
            <div class="menu-item">
                <div class="item-details">
                    <h3>TAGLIATELLE (fresca) BOSCAIOLA</h3>
                    <p class="item-description">Ręcznie wykonane tagliatelle, szynka gotowana, brązowe pieczarki, pomidory, groszek śmietana, papryka wędzona, natka pietruszki, parmezan</p>
                </div>
                <div class="item-price">43,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>PASTA Z KREWETKAMI</h3>
                    <p class="item-description">Oliwa z oliwek extra vergine, pomidory, krewetki, natka pietruszki</p>
                </div>
                <div class="item-price">52,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>PENNE RIGATE ZE SZPARAGAMI I BOROWIKAMI</h3>
                    <p class="item-description">Zielone szparagi, borowiki, por, groszek, papryka wędzona, śmietana, pecorino romano</p>
                </div>
                <div class="item-price">43,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>TAGLIATELLE (fresca) AL RAGU</h3>
                    <p class="item-description">Mielony kark wołowy, szynka wp, pomidory, czerwone wino, parmezan</p>
                </div>
                <div class="item-price">42,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>SPAGHETTI (fresca) AGLIO E OLIO</h3>
                    <p class="item-description">Oliwa z oliwek extra virgin, chili, czosnek, natka pietruszki</p>
                </div>
                <div class="item-price">39,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>SPAGHETTI (fresca) CARBONARA</h3>
                    <p class="item-description">Jajko, guanciale, pieprz, pecorino romano, parmigiano reggiano</p>
                </div>
                <div class="item-price">41,00 zł</div>
            </div>
        </div>
    </section>
    
    <section class="menu-section" id="salatki">
        <h2 class="section-title">SAŁATKI</h2>
        
        <div class="menu-items">
            <div class="menu-item">
                <div class="item-details">
                    <h3>SAŁATKA CAPRESE</h3>
                    <p class="item-description">Mozzarella, pomidory, pesto bazyliowe, rukola, focaccia</p>
                </div>
                <div class="item-price">32,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>SAŁATKA Z BRZOSKWINIĄ I SZPARAGAMI I PROSCIUTTO CRUDO</h3>
                    <p class="item-description">Brzoskwinia, zielone szparagi, szynka długodojrzewająca gorgonzola, mix sałat, sos balsamico, focaccia</p>
                </div>
                <div class="item-price">41,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>SAŁATKA Z FIGĄ I COPPĄ</h3>
                    <p class="item-description">Świeża figa, mozzarella, pistacje, coppa-długodojrzewający karczek, mix sałat, sos balsamico, focaccia</p>
                </div>
                <div class="item-price">41,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>SAŁATKA CAPRESE+PROSCIUTTO</h3>
                    <p class="item-description">Mozzarella, pomidory, pesto, rukola, szynka długodojrzewająca, focaccia</p>
                </div>
                <div class="item-price">42,00 zł</div>
            </div>
        </div>
    </section>
    
    <section class="menu-section" id="gnocchi">
        <h2 class="section-title">GNOCCHI</h2>
        
        <div class="menu-items">
            <div class="menu-item">
                <div class="item-details">
                    <h3>GNOCCHI BURACZANE Z FARSZEM MASCARPONE Z ORZECHAMI WŁOSKIMI w SOSIE GORGONZOLA</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">47,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>RAVIOLI BOROWIKOWE w sosie GORGONZOLA Z ORZECHAMI WŁOSKIMI</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">45,00 zł</div>
            </div>
        </div>
    </section>
    
    <section class="menu-section" id="zupy">
        <h2 class="section-title">ZUPY</h2>
        
        <div class="menu-items">
            <div class="menu-item">
                <div class="item-details">
                    <h3>KREM Z POMIDORÓW Z MOZZARELLĄ</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">15,00 zł</div>
            </div>
        </div>
    </section>
    
    <section class="menu-section" id="pizza">
        <h2 class="section-title">PIZZA 32cm</h2>
        
        <div class="menu-items">
            <div class="menu-item">
                <div class="item-details">
                    <h3>MARGHERITA</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">34,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>Z SZYNKĄ I PIECZARKAMI</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">45,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>Z SZYNKĄ COTTO</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">43,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>Z SZYNKĄ CRUDO</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">49,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>Z PIECZARKAMI</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">38,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>Z GRUSZKĄ I GORGONZOLĄ</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">43,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>SALAMI PICANTE</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">42,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>Z PESTO I POMIDORAMI</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">39,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>Z GORGONZOLĄ I POMIDORAMI</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">43,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>Z GRILOWANYMI WARZYWAMI</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">42,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>GORGONZOLA, SZPINAKIEM I POMIDORAMI</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">45,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>PIZZA al TAGLIO- na wagę</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">57 zł/1kg</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>FOCACCIA</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">57,00 zł/1kg</div>
            </div>
        </div>
    </section>
    
    <section class="menu-section" id="napoje">
        <h2 class="section-title">NAPOJE</h2>
        
        <div class="menu-items">
            <div class="menu-item">
                <div class="item-details">
                    <h3>COCA-COLA 0,33</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>LEMON SODA 0,33</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>ORANGE SODA 0,33</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>MOJITO SODA 0,33</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>S.PELLEGRINO 0,33</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>SAN BENEDETTO PESCA 0,33</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>YOGA pomarańcza 0,20</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>YOGA gruszka 0,20</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>YOGA brzoskwinia 0,20</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>YOGA pomidorowa/brzoskwinia/jagoda</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>YOGA jabłko 0,20</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>YOGA truskawka 0,20</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>SAN BENEDETTO ALEGRA</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>WODA NIEGAZOWANA 0,33</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">8 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>WODA GAZOWANA 0,33</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">8 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>KAWA CZARNA</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">12,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>KAWA MACCHIATO</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">14,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>CAPPUCCINO</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">15,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>LATTE MACCHIATO</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">17,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>ESPRESSO</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">5,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>ESPRESSO DOPPIO</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">10,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>HERBATA CZARNA</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">12,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>KAWA ZIARNA 1kg</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">140,00 zł</div>
            </div>
        </div>
    </section>
    
    <section class="menu-section" id="alkohol">
        <h2 class="section-title">ALKOHOL</h2>
        
        <div class="menu-items">
            <div class="menu-item">
                <div class="item-details">
                    <h3>SPRITZ FREE % 0,2L</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">25,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>SPRITZ 0,2l</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">26,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>WINO BIAŁE/CZERWONE lampka</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">17,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>WINO BIAŁE/CZERWONE 0,25</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">26,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>WINO BIAŁE/CZERWONE 0,5</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">45,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>WINO BIAŁE/CZERWONE 0,7</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">60,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>PIWO LANE Birra Moretti 0,33</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">14,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>PIWO Peroni 0% 0,33</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">14,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>PROSECCO ASTORIA 0,75</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">120,00-140,00 zł</div>
            </div>
            
            <div class="menu-item">
                <div class="item-details">
                    <h3>WINO MIGDAŁOWE lampka</h3>
                    <p class="item-description"></p>
                </div>
                <div class="item-price">18,00 zł</div>
            </div>
        </div>
    </section>

    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-logo">
                <h3>Froza Italia</h3>
                <p>Autentyczna włoska kuchnia</p>
            </div>
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2024 Froza Italia. Wszystkie prawa zastrzeżone.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const categoryButtons = document.querySelectorAll('.category-btn');
            const mobileSelect = document.getElementById('mobile-category-select');
            const menuSections = document.querySelectorAll('.menu-section');
            const stickyNav = document.getElementById('sticky-nav');
            const stickyNavItems = document.querySelectorAll('.sticky-nav-item');
            const menuCategories = document.querySelector('.menu-categories');
            
            // Добавляем плавные переходы для всех секций меню
            menuSections.forEach(section => {
                section.style.transition = 'opacity 0.3s ease';
                section.style.display = 'none';
                section.style.opacity = '0';
            });
            
            // Добавляем плавные переходы для меню категорий
            menuCategories.style.transition = 'opacity 0.3s ease, transform 0.3s ease, padding 0.2s ease';
            
            // Показываем первый раздел по умолчанию
            const defaultSection = document.getElementById('makarony');
            defaultSection.style.display = 'block';
            setTimeout(() => {
                defaultSection.style.opacity = '1';
            }, 50);
            
            // Функция для прокрутки к разделу с улучшенной анимацией
            function scrollToSection(sectionId) {
                const section = document.getElementById(sectionId);
                if (section) {
                    window.scrollTo({
                        top: section.offsetTop - 120,
                        behavior: 'smooth'
                    });
                }
            }
            
            // Функция для переключения разделов меню с анимацией
            function switchMenuSection(targetId) {
                // Находим текущий активный раздел
                const currentActive = Array.from(menuSections).find(section => 
                    section.style.display === 'block' && section.style.opacity === '1');
                
                const targetSection = document.getElementById(targetId);
                
                if (currentActive && currentActive !== targetSection) {
                    // Плавно скрываем текущий раздел
                    currentActive.style.opacity = '0';
                    setTimeout(() => {
                        currentActive.style.display = 'none';
                        
                        // Показываем целевой раздел
                        targetSection.style.display = 'block';
                        setTimeout(() => {
                            targetSection.style.opacity = '1';
                        }, 50);
                    }, 300);
                } else if (!currentActive) {
                    // Если нет активного раздела, просто показываем целевой
                    targetSection.style.display = 'block';
                    setTimeout(() => {
                        targetSection.style.opacity = '1';
                    }, 50);
                }
            }
            
            // Обработчик для кнопок категорий с улучшенной анимацией
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Удаляем активный класс у всех кнопок
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    // Добавляем активный класс нажатой кнопке
                    this.classList.add('active');
                    
                    // Добавляем анимацию нажатия
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                    
                    // Получаем целевой раздел
                    const targetSection = this.getAttribute('data-target');
                    
                    // Переключаем раздел с анимацией
                    switchMenuSection(targetSection);
                    
                    // Прокручиваем к соответствующему разделу
                    scrollToSection(targetSection);
                    
                    // Синхронизируем с мобильным селектом
                    mobileSelect.value = targetSection;
                });
            });
            
            // Обработчик для мобильного селекта с анимацией
            mobileSelect.addEventListener('change', function() {
                const targetSection = this.value;
                
                // Переключаем раздел с анимацией
                switchMenuSection(targetSection);
                
                // Прокручиваем к соответствующему разделу
                scrollToSection(targetSection);
                
                // Синхронизируем с кнопками категорий
                categoryButtons.forEach(btn => {
                    if (btn.getAttribute('data-target') === targetSection) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });
            });
            
            // Обработчик для элементов фиксированной навигации с анимацией
            stickyNavItems.forEach(item => {
                item.addEventListener('click', function() {
                    const targetSection = this.getAttribute('data-target');
                    
                    // Переключаем раздел с анимацией
                    switchMenuSection(targetSection);
                    
                    // Прокручиваем к соответствующему разделу
                    scrollToSection(targetSection);
                    
                    // Обновляем активные элементы навигации
                    stickyNavItems.forEach(navItem => {
                        navItem.classList.toggle('active', navItem.getAttribute('data-target') === targetSection);
                    });
                    
                    // Синхронизируем с кнопками категорий и мобильным селектом
                    categoryButtons.forEach(btn => {
                        btn.classList.toggle('active', btn.getAttribute('data-target') === targetSection);
                    });
                    mobileSelect.value = targetSection;
                });
            });
            
            // Функция для определения текущего видимого раздела с улучшенной производительностью
            function updateActiveSection() {
                let currentSectionId = null;
                const scrollPosition = window.scrollY + 150; // Добавляем смещение для лучшего определения
                
                // Находим текущий видимый раздел с использованием более эффективного алгоритма
                for (const section of menuSections) {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.offsetHeight;
                    
                    if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                        currentSectionId = section.id;
                        break; // Прерываем цикл, как только нашли видимый раздел
                    }
                }
                
                // Обновляем активные элементы навигации только если нашли раздел
                if (currentSectionId) {
                    // Обновляем кнопки категорий более эффективным способом
                    categoryButtons.forEach(btn => {
                        btn.classList.toggle('active', btn.getAttribute('data-target') === currentSectionId);
                    });
                    
                    // Обновляем элементы фиксированной навигации
                    stickyNavItems.forEach(item => {
                        item.classList.toggle('active', item.getAttribute('data-target') === currentSectionId);
                    });
                    
                    // Обновляем мобильный селект без вызова события change
                    if (mobileSelect.value !== currentSectionId) {
                        mobileSelect.value = currentSectionId;
                    }
                }
            }
            
            // Используем throttle для оптимизации обработчика прокрутки
            let scrollTimeout;
            let lastScrollTop = 0;
            
            window.addEventListener('scroll', function() {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                // Анимация для меню категорий при прокрутке
                if (scrollTop > 300) {
                    menuCategories.style.opacity = '0.95';
                    menuCategories.style.transform = 'translateY(0)';
                    
                    if (scrollTop > lastScrollTop) {
                        // Прокрутка вниз - меню становится компактнее
                        menuCategories.style.padding = '10px 5%';
                    } else {
                        // Прокрутка вверх - меню возвращается к нормальному размеру
                        menuCategories.style.padding = '15px 5%';
                    }
                } else {
                    // Вверху страницы - нормальное отображение
                    menuCategories.style.opacity = '1';
                    menuCategories.style.transform = 'translateY(0)';
                    menuCategories.style.padding = '15px 5%';
                }
                
                lastScrollTop = scrollTop;
                
                // Обновление активного раздела с оптимизацией
                if (!scrollTimeout) {
                    scrollTimeout = setTimeout(() => {
                        updateActiveSection();
                        scrollTimeout = null;
                    }, 100); // Ограничиваем частоту вызовов до 10 раз в секунду
                }
            });
            
            // Инициализируем активный раздел при загрузке
            updateActiveSection();
        });
    </script>
</body>
</html>